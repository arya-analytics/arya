---
import Breadcrumb from "@/components/article/Breadcrumb.astro";
import NextPrev from "@/components/NextPrev.astro";
import { Align, Text } from "@synnaxlabs/pluto";
const {
    title,
    description,
    breadcrumb = true,
    url,
    next,
    prev,
    nextURL,
    prevURL,
    published,
} = Astro.props;
---

<article transition:animate="none">
    <Align.Space direction="x" justify="spaceBetween">
        {breadcrumb && <Breadcrumb url={url} />}
        {
            published != null && (
                <Align.Space direction="x" size="small">
                    <Text.Text level="small" shade={7}>
                        Published{" "}
                    </Text.Text>
                    <Text.Text level="small" weight={400}>
                        Oct 15, 2024
                    </Text.Text>
                </Align.Space>
            )
        }
    </Align.Space>
    {
        title.length > 30 ? (
            <h2 class="article-title">{title}</h2>
        ) : (
            <h1 class="article-title">{title}</h1>
        )
    }
    <h4 class="article-description">{description}</h4>
    <slot />
    <NextPrev prev={prev} next={next} prevURL={prevURL} nextURL={nextURL} />
</article>

<style is:global>
    article {
        position: relative;
        padding: 8rem;
        flex-basis: 840px;
        flex-shrink: 1;
        flex-grow: 1;
        margin-bottom: 25rem;
        min-width: 0;
        min-height: 100vh;
        .article-title {
            width: fit-content;
            text-wrap: balance;
        }

        & .pluto-breadcrumb {
            & .pluto-text-link {
                &:last-child {
                    & .pluto-text {
                        color: var(--pluto-gray-l9);
                    }
                }
                & .pluto-text {
                    font-weight: 375;
                    color: var(--pluto-gray-l6);
                    &:hover {
                        color: var(--pluto-gray-l9) !important;
                    }
                }
                &:hover {
                    text-decoration: none !important;
                }
            }
            & .synnax-icon-caret-right {
                transform: translateY(0px) !important;
                width: 2rem;
                height: 2rem;
                color: var(--pluto-gray-l6);
                &:first-child {
                    display: none;
                }
            }
        }

        @media (max-width: 900px) {
            padding: 5rem 3rem;
        }

        .article-title::after {
            content: "";
            display: block;
            width: 100px;
            margin-top: 2rem;
            height: 2px;
            background: var(--pluto-primary-z);
        }

        .article-description {
            color: var(--pluto-gray-l8);
            font-weight: 350;
        }

        h1,
        h3,
        h4,
        h5,
        h6,
        p {
            margin: 3rem 0;
        }

        :is(h1, h2, h3).pluto-text {
            & a {
                color: var(--pluto-gray-l7);
                opacity: 0;
                margin-left: 2rem;
                position: relative;
                transition: all 0.2s;
                & svg {
                    position: absolute;
                    top: 50%;
                    transform: translateY(-50%);
                }
            }
            &:hover {
                & a {
                    opacity: 1;
                    &:hover {
                        color: var(--pluto-gray-l9);
                    }
                }
            }
        }

        video,
        img {
            margin: 5rem 0;
        }

        figure {
            margin: 5rem 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            figcaption {
                font-family: var(--pluto-font-family);
                font-size: var(--pluto-small-size);
                line-height: var(--pluto-small-line-height);
                color: var(--pluto-gray-l8);
                font-style: italic;
                text-align: center;
                text-wrap: balance;
            }
            img {
                margin-bottom: 2rem;
                margin-top: -2rem;
            }
        }

        h2 {
            margin: 4rem 0;
        }

        pluto-tabs-selector {
            margin: 1.5rem 0;
        }

        & video,
        img:not(.diagram img) {
            width: 100%;
            border-radius: 1rem !important;
            border: var(--pluto-border-l4);
            box-shadow: 0 0 1rem 0 var(--pluto-gray-l4);

            @media (prefers-color-scheme: dark) {
                box-shadow: 0 0 2rem 0 rgba(50, 50, 50, 0.1);
            }
        }

        .pluto-divider {
            border-top: var(--pluto-border-l4);
            margin: 5% 0;
        }

        .pluto-tabs-selector {
            --pluto-height-medium: 6.5rem !important;
        }

        /* Makes icons appear centered in the toolbar */
        p .synnax-icon {
            transform: translateY(2px);
        }

        h3 .synnax-icon {
            transform: translateY(3px);
        }

        .pluto-note {
            display: block;
            & > * {
                font-size: var(--pluto-small-size);
                font-family: var(--pluto-font-family);
                font-weight: 450 !important;
                line-height: calc(var(--pluto-small-line-height) * 1.2);
            }
        }

        table > :not(caption) > * > * {
            position: relative;
            border-width: 0 1px;
            padding: 1.25rem 1.5rem;
        }

        table td {
            font-size: var(--pluto-small-size);
            line-height: var(--pluto-small-line-height);
            vertical-align: baseline;
        }

        table tr {
            border-bottom: var(--pluto-border);
        }

        table thead th {
            padding: 1.5rem 1.5rem;
            font-weight: 600;
        }

        table thead tr {
            border: none;
            border-width: 2px;
        }

        table th {
            border-bottom: var(--pluto-border);
            text-align: start;
        }

        table {
            table-layout: auto;
            width: calc(100% - 4px);
            border-spacing: 0;
            background: transparent;
            border-collapse: collapse;
            overflow-x: auto;
            border-style: hidden;
        }
    }
</style>
