"use strict";const{app:n,shell:s,BrowserWindow:r,ipcMain:d}=require("electron"),{join:i}=require("path"),{MAIN_WINDOW:c,configureStore:u}=require("@synnaxlabs/drift"),{ElectronRuntime:f,listenOnMain:w}=require("@synnaxlabs/drift/electron"),a=e=>{e.loadFile(i(__dirname,"../renderer/main_window/index.html"))};function l(){console.log(void 0);const e=new r({width:900,height:670,title:c,show:!1,frame:!1,autoHideMenuBar:!0,...process.platform==="linux"?{icon}:{},webPreferences:{preload:i(__dirname,"preload.js"),sandbox:!1}});a(e),w({mainWindow:e,createWindow:o=>{console.log(o);const t=new r({...o,frame:!1,webPreferences:{preload:i(__dirname,"preload.js"),sandbox:!1}});return a(t),t}}),e.on("ready-to-show",()=>{e.show()}),e.on("closed",()=>{n.quit()}),e.webContents.setWindowOpenHandler(o=>(s.openExternal(o.url),{action:"deny"})),e.loadURL("http://localhost:5173")}n.whenReady().then(()=>{d.on("ping",()=>console.log("pong")),l(),n.on("activate",function(){r.getAllWindows().length===0&&l()})});n.on("window-all-closed",()=>{process.platform!=="darwin"&&n.quit()});
